<!DOCTYPE html>
<!-- saved from url=(0029)https://carrac.co.jp/service/ -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Jesse Yule's Blog</title>
    <meta name="viewport" content="width=device-width">

    <style>.l-page { visibility: hidden; }</style>
    <link rel="stylesheet" as="style" href="../../css/main/main.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="https://carrac.co.jp/img/common/app_icon.png">

    <link rel="stylesheet" href="../../css/menu/common.css" media="all">
    <link rel="stylesheet" href="../../css/menu/home.css" media="all">
    <script type="text/javascript" async="" src="../../css/menu/analytics.js"></script>
    <script async="" src="../../css/menu/js"></script>

    <!-------------------------matjax------------------------------>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
    <!---------------------------------------------------------------->

    <meta name="theme-color" content="#ffffff">

    <script type="text/javascript" async="" src="../../css/main/analytics.js"></script><script async="" src="../../css/main/gtm.js"></script><script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-KHDRBVP');
    </script>
    <!-- End Google Tag Manager -->
  </head>
  <body style="font-family: 等线, 等线 Light,'微软雅黑 Light',Helvetica Neue, Helvetica, Arial, PingFang SC; font-weight: lighter ;word-break: break-all;background-color: #323638 ">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      &lt;iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHDRBVP"
      height="0" width="0" style="display:none;visibility:hidden"&gt;
      &lt;/iframe&gt;
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <div class="l-page" data-page-id="service">
      <!-- Start to define the global header.-->
      <div class="l-gh"></div>
      <!-- End to define the global header.-->




      <div class="l-contents">
        <!-- Start to define the main content.-->

          <header class="st-hdr" id="js-hdr">
              <div class="hdr-bar m-row m-row--jc--spacebetween m-row--ai--center">

              </div>

          </header>

          <button class="trigger" id="js-trigger"><span></span><span></span><span></span></button>



          <nav class="overlay-navigation" style="color: #eeeeee">
              <div class="overlay-navigation__inner m-row">
                  <div class="overlay-navigation__block">
                      <ul class="sitemap m-row m-row--fw--wrap">

                                                   <li class="sitemap__unit"><a href="../../index.html">Home</a></li>

                          <li class="sitemap__unit"><a href="../../about/about.html">About</a></li>

                          <li class="sitemap__unit"><a href="../../programming/java1.html">Java</a></li>



                          <li class="sitemap__unit"><a href="../../math/all1.html">Mathematics</a></li>

                          <li class="sitemap__unit"><a href="../../naturallanguage/all1.html">Natural Language</a></li>

                          <li class="sitemap__unit"><a href="../../machinelearning/ml1.html">Machine Learning</a></li>

<li class="sitemap__unit"><a href="../../articles/all1.html">Others</a></li>

                      </ul>

                  </div>
                  <div class="sns"><h2 class="overlay-navigation__siteID"><img src="../../css/menu/img_siteID-m.svg"
                                                                               alt=""></h2></div>
              </div>
          </nav>




          <div class="p-lower">
          <div class="c-red-line c-slide-in u-animdel-100"></div>
          <h2 class="p-lower__title-en c-slide-in u-animdel-100"> 泊松回归</h2>

		  
		   <div class="p-lower-kv">
            <div class="p-lower-kv__text">
              <div class="p-lower-kv__subtitle"> </div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">泊松回归是广义线性回归模型中的一种，除了泊松回归广义线性模型还有负二项、逻辑、gamma等等，之所以这里主要把泊松回归拿出来讲，是最近发现它的变型还挺多的，而且用得也比较多。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">首先我们来谈谈泊松回归的定义，从GLM的角度来说，泊松回归就是针对服从泊松分布的响应变量进行回归分析。泊松分布描述的是某段时间内事件发生次数的概率，既然是次数就说明了响应变量是整数，也就是说，只要我们看到响应变量是整数，就可以考虑泊松分布建模（其实还有负二项分布），这就是泊松分布比较常用的原因。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><section style="text-align: center; margin:0 auto">$$P(X=k)=\frac{e^\lambda \lambda^k}{k!}$$</section></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">泊松分布有一个特点，那就是期望和方差都为lambda，换句话说，假如我们用泊松回归，就假设了随着数据量增大，数据的均值和方差会越来越接近。实际上，响应变量观察到的方差很可能比泊松分布预测的方差要大，这就导致了一种称为过度离势（over dispersion）的问题，同时也催生出泊松回归的第一种变型，over-dispersed poisson model，或者说类泊松分布。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">这里暂不谈论太多过度离势的原因，就说一个很严重的后果，假如在存在过度离势我们仍然使用泊松回归，就无法对变量的p值进行正确的判断，比如下图是我用泊松回归（左）和类泊松回归（右）分析得到的结果：</div>
                <div class="p-service-index-map__image c-fade-in-up js-scroll-item is-shown">
                    <picture>
                        <source media="(max-width: 568px)" srcset="image/1.png"><img src="image/1.png" alt="ポジショニングマップ">
                    </picture>
                </div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">主要关注几点，第一，不论是泊松还是类泊松，参数估计的结果都是一样的，第二，类泊松的参数方差、p值等是改变的，这里或许还不够明显，但有时候p值会变得过大，这时候我们就不能在模型中继续使用这个变量了（详情可查看之前写的用GLM进行数据分析系列文章）。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">在应用泊松分布，除了过度离势问题，还有一个值得注意的问题，就是0点有过多数值：</div>
                <div class="p-service-index-map__image c-fade-in-up js-scroll-item is-shown">
                    <picture>
                        <source media="(max-width: 568px)" srcset="image/2.png"><img src="image/2.png" alt="ポジショニングマップ">
                    </picture>
                </div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">通过上图可以看出，大量数据的取值为0，只时候我们用了泊松回归得到的效果也一点都不好，所以就有了第二种变型，zero-inflated poisson distribution（中文翻译貌似是零膨胀泊松分布）。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">所谓的零膨胀模型，其实就是针对那些在零点占很大比重的数据进行分析的模型。主要是假设零计数数据和服从泊松分布的计数数据各占一定比例，共同构成一个混合分布。以zip（zero-inflated poisson）为例：</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><section style="text-align: center; margin:0 auto">$$P(Y_i = y_i) =
                    \begin{cases}
                    p + (1-p)f(0) & \text{y_i=0}\\
                    (1-p)f(y_i) & \text{y_i>0}
                    \end{cases}$$</section></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">其中，f就是泊松分布：</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><section style="text-align: center; margin:0 auto">$$f(y_i) =\frac{\lambda_i^{y_i}}{y_i !}exp(-\lambda_i)$$</section></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">式中p越大就说明数据中0的比例越大，当p=0，分布就变成正常的泊松分布。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">现在我们已经知道了响应变量的分布，下一步要做的就是分析响应变量和解释变量之间的关系，这里直接给出答案，只要是通过分布中的p和lambda分别和解释变量构成联系的：</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><section style="text-align: center; margin:0 auto">$$log \mu_i = \beta x_{i1}$$</section></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><section style="text-align: center; margin:0 auto">$$log \frac{\pi_i}{1-\pi_i} = \gamma x_{i2}$$</section></div>

                <div class="p-lower-kv__outline p-lower-kv__outline--col2">其中，xi1和xi2都是取自解释变量的一部分或全部，可能相同也可能不同。整个建模过程，可以看成是首先估计出p和mu的取值，使得响应变量的分布能尽可能接近观测值，然后，再用解释变量去拟合这两个参数。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">最后，用零膨胀泊松模型去重新分析一下，得到的结果就明显比之前好很多了。</div>
                <div class="p-service-index-map__image c-fade-in-up js-scroll-item is-shown">
                    <picture>
                        <source media="(max-width: 568px)" srcset="image/3.png"><img src="image/3.png" alt="ポジショニングマップ">
                    </picture>
                </div>



            </div>
          </div>
		  



        </div>

        <!-- End to define the main content.-->
      </div>


    </div>
    <script src="../../css/main/main.min.js" async=""></script>

    <script type="text/javascript" defer=""
            src="../../css/menu/autoptimize_73b1aaeb49de3f7372d04614ffa9ecd3.js"></script>

</body></html>