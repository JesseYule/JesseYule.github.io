<!DOCTYPE html>
<!-- saved from url=(0029)https://carrac.co.jp/service/ -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Jesse Yule's Blog</title>
    <meta name="viewport" content="width=device-width">

    <style>.l-page { visibility: hidden; }</style>
    <link rel="stylesheet" as="style" href="../../css/main/main.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="https://carrac.co.jp/img/common/app_icon.png">

    <link rel="stylesheet" href="../../css/menu/common.css" media="all">
    <link rel="stylesheet" href="../../css/menu/home.css" media="all">
    <script type="text/javascript" async="" src="../../css/menu/analytics.js"></script>
    <script async="" src="../../css/menu/js"></script>


    <meta name="theme-color" content="#ffffff">

    <script type="text/javascript" async="" src="../../css/main/analytics.js"></script><script async="" src="../../css/main/gtm.js"></script><script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-KHDRBVP');
    </script>
    <!-- End Google Tag Manager -->
  </head>
  <body style="font-family: 等线, 等线 Light,'微软雅黑 Light',Helvetica Neue, Helvetica, Arial, PingFang SC; font-weight: lighter ;word-break: break-all ">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      &lt;iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHDRBVP"
      height="0" width="0" style="display:none;visibility:hidden"&gt;
      &lt;/iframe&gt;
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <div class="l-page" data-page-id="service">
      <!-- Start to define the global header.-->
      <div class="l-gh"></div>
      <!-- End to define the global header.-->




      <div class="l-contents">
        <!-- Start to define the main content.-->

          <header class="st-hdr" id="js-hdr">
              <div class="hdr-bar m-row m-row--jc--spacebetween m-row--ai--center">

              </div>

          </header>

          <button class="trigger" id="js-trigger"><span></span><span></span><span></span></button>


          <nav class="overlay-navigation" style="color: #eeeeee">
              <div class="overlay-navigation__inner m-row">
                  <div class="overlay-navigation__block">
                      <ul class="sitemap m-row m-row--fw--wrap">

                          <li class="sitemap__unit"><a href="https://www.barhotel.com/concept/">主页<span
                                  class="icon-arrow-s"></span></a></li>

                          <li class="sitemap__unit"><a href="https://www.barhotel.com/" class="js-lower is-open">编程语言<span
                                  class="icon"></span></a>
                              <ul style="display: block;">
                                  <li><a href="https://www.barhotel.com/news/">Java与Python的选择</a></li>
                                  <li><a href="https://www.barhotel.com/news/">指令式编程与函数式编程</a></li>
                                  <li><a href="https://www.barhotel.com/news/">面向对象的优势</a></li>



                              </ul>
                          </li>


                          <li class="sitemap__unit"><a href="https://www.barhotel.com/the-bar/" class="js-lower is-open">数学理论<span class="icon"></span></a>
                              <ul style="display: block;">
                                  <li><a href="https://www.barhotel.com/the-bar/">多项式理论</a></li>
                                  <li><a href="https://www.barhotel.com/the-bar/bar-interior/">分形概论</a></li>
                                  <li><a href="https://www.barhotel.com/the-bar/private-spa-bar/">求根公式的分形结构</a></li>
                              </ul>
                          </li>
                      </ul>


                      <ul class="sitemap m-row m-row--fw--wrap">
                          <li class="sitemap__unit"><a href="https://www.barhotel.com/stay/" class="js-lower is-open">数据科学<span
                                  class="icon"></span></a>
                              <ul style="display: block;">
                                  <li><a href="https://www.barhotel.com/stay/">数据库的作用</a></li>
                                  <li><a href="https://www.barhotel.com/stay/suite/">大数据预处理</a></li>

                              </ul>
                          </li>


                          <li class="sitemap__unit"><a href="https://www.barhotel.com/facility/" class="js-lower is-open">人工智能<span
                                  class="icon"></span></a>
                              <ul style="display: block;">
                                  <li><a href="https://www.barhotel.com/facility/">机器学习与深度学习</a></li>
                                  <li><a href="https://www.barhotel.com/facility/lounge/">机器学习概述</a></li>
                                  <li><a href="https://www.barhotel.com/facility/art-and-design/">机器学习算法</a></li>
                              </ul>
                          </li>

                          <li class="sitemap__unit"><a href="https://www.barhotel.com/facility/" class="js-lower is-open">交通大数据项目<span
                                  class="icon"></span></a>
                              <ul style="display: block;">
                                  <li><a href="https://www.barhotel.com/facility/">项目概述</a></li>

                              </ul>
                          </li>

                          <li class="sitemap__unit"><a href="https://www.barhotel.com/facility/" class="js-lower is-open">自然语言识别项目<span
                                  class="icon"></span></a>
                              <ul style="display: block;">
                                  <li><a href="https://www.barhotel.com/facility/">项目概述</a></li>
                                  <li><a href="https://www.barhotel.com/facility/lounge/">代码详解</a></li>
                              </ul>
                          </li>
                      </ul>

                  </div>
                  <div class="sns"><h2 class="overlay-navigation__siteID"><img src="../../css/menu/img_siteID-m.svg"
                                                                               alt=""></h2></div>
              </div>
          </nav>



          <div class="p-lower">
          <div class="c-red-line c-slide-in u-animdel-100"></div>
          <h2 class="p-lower__title-en c-slide-in u-animdel-100">REACH项目代码细节</h2>
		  
		 
		  
		  
          <div class="p-lower-kv">
            <div class="p-lower-kv__text">
              <div class="p-lower-kv__subtitle"> </div>
              <div class="p-lower-kv__outline p-lower-kv__outline--col2">在这里，我们开始关注REACH的运行逻辑。</div>
                     </div>
          </div>
		  
		  
		    <h3 class="c-red-hyphen-head c-fade-in-up js-scroll-item is-shown">
            <div class="c-red-hyphen-head__label">REACH的启动</div>
          </h3>
		  
		  
		   <div class="p-lower-kv">
            <div class="p-lower-kv__text">
              <div class="p-lower-kv__subtitle"> </div>
        
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2">运行REACH可以先尝试运行文件夹里的shell，在命令行cd到文件夹根目录，然后输入sh shell可运行。</div>
              <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
              <div class="p-lower-kv__outline p-lower-kv__outline--col2">输入"7-E-cadherin, a putative tumor-suppressor gene is down-regulated in poorly differentiated head and neck SCC and maybe important in nodal metastasis."分析得到以下结果</div>
            </div>
          </div>
		  
          <div class="p-service-index-map c-fade-in-up js-scroll-item is-shown">
            <div class="p-service-index-map__image">
              <picture>
                <source media="(max-width: 568px)" srcset="image/begin.jpg"><img src="image/begin.jpg" alt="ポジショニングマップ">
              </picture>
            </div>
          </div>
		  
		   <div class="p-lower-kv">
            <div class="p-lower-kv__text">
              <div class="p-lower-kv__subtitle"> </div>
              <div class="p-lower-kv__outline p-lower-kv__outline--col2">其中显示了句子的分词结果，每个词的词性，识别到的生物领域实体等等。</div>
              <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
            </div>
          </div>
		  
		  
		  <h3 class="c-red-hyphen-head c-fade-in-up js-scroll-item is-shown">
            <div class="c-red-hyphen-head__label">REACH的运行过程</div>
          </h3>
		  
		   <div class="p-lower-kv">
            <div class="p-lower-kv__text">
              <div class="p-lower-kv__subtitle"> </div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2">REACH本身是一个很庞大的系统，包含多个多层次的文件，里面有大量不同的代码，如果从代码层面读懂整个运行机制，从运行的过程一步步查看其调用了具体哪个文件做了什么是个可行的方向。</div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
              <div class="p-lower-kv__outline p-lower-kv__outline--col2">首先这里讨论的代码来源于github上的REACH项目，这个项目使用scala编写的。运行shell，就是运行main/src/main/scala/org/clulab/reach中的ReachShell.scala，分析ReachShell.scala可知，REACH先初始化ReachSystem（实例化ReachSystem并命名为reach，与ReachShell.scala同一个目录有一个ReachSystem.scala文件），然后显示初始菜单，并等待用户输入，当用户输入文本时，即把文本内容、"rulershell"作为参数调用reach的mkDoc。</div>
              <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2">在ReachSystem.scala中可看到定义了的mkDoc方法，他本身需要传入三个参数：text、docId、chunkId（带默认参数），传入的文本主要是在方法中，再次作为参数调用procAnnotator的annotate方法，而procAnnotator则是被命名简化的processorAnnotator.getOrElse(ProcessorAnnotatorFactory())</div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>              
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2">从这里开始，文本就被传入到clulab开发的处理器进行分析。有一个奇怪的地方，从整个REACH项目中是找不到processorAnnotator这个文件，关于annotate这个方法也暂时找不到。另一方面，在github上直接找到了clulab开发的processors项目。所以暂时从processors项目入手，分析处理器是如何分析传入的语句的。</div>
            </div>
          </div>
		  
		  	  <h3 class="c-red-hyphen-head c-fade-in-up js-scroll-item is-shown">
            <div class="c-red-hyphen-head__label">Processors对文本的处理</div>
          </h3>
		  
		   <div class="p-lower-kv">
            <div class="p-lower-kv__text">
              <div class="p-lower-kv__subtitle"> </div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2">clulab的Natural language processors是clu的主要公共代码库，它主要包含了org.clulab.odin（称为odin的基于规则事件提取（EE）框架，REACH就是在odin的基础上开发的），两个完整的修辞结构理论话语解析器，机器学习包，一套自然语言处理器（org.clulab.processors，其中包括以下API：coreNLPProcessor、FastNLPProcessor、BioNLPProcessor、FastBioNLPProcessor、CLUProcessor、BioCluProcessor、PortugueseCluProcessor，实际上，就是这些处理器对传入的文本进行处理。</div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2">针对在github下载的Processors项目，也有一个ProcessorShell，打开后，选择了调用的处理器，然后对传入的文本调用CluProcessor的annotate方法进行分析，所以不论是REACH还是直接通过Processor对文本进行分析，都是通过annotate方法对文本进行分析。</div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2">假设当前选择了CoreNLPProcessor，则调用CoreNLPProcessor.scala（BioNLPProcessor等都是基于CoreNLPProcessor进行改写的，从整个结构来看，CoreNLPProcessor也继承自ShallowNLPProcessor，ShallowNLPProcessor继承自Processor（trait），Processor继承自ProcessorAnnotator（trait），ProcessorAnnotator继承自ProcessorCSController（trait）；另外，对比BioNLPProcessor和CoreNLPProcessor，可发现BioNLPProcessor中import了ner里的HybridNER和KBLoader两个类，还有import了bio文件夹中的BIoNERPostProcessor和BioTokenizerPostProcessor两个类，可判断BioNLPProcessor针对生物领域的改进就反映在这几个文件以及相关的调用处理。），结构上比较复杂，主要还是关注annotate这个方法具体在哪里怎么对语句进行分析。</div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2">回到CoreNLPProcessor中，观察整段代码，annotate只出现在一行代码：coref:annotate(annotation.get),再分析coref其实就是与StanfordCoreNLP相关的一个val，可认为实际上这段文本在CoreNLPProcessor中就被传到StandfordCoreNLP中调用annotate进行分析。根据前面的叙述，可认为这部分的分析主要围绕分词分句和词性标记。</div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
			  <div class="p-lower-kv__outline p-lower-kv__outline--col2">目前主要还是把重点放在BioNLPProcessor针对CoreNLPProcessor的改进上，也就是ner中的HybridNER和KBLoader，和bio中的BIoNERPostProcessor和BioTokenizerPostProcessor，根据前面的叙述，可知这部分与实体提取有关。关于生物领域的实体提取，主要结合了基于规则和基于统计的方法，基于统计主要是识别数据库中已有的实体名称的提及，同时也编写额外的规则去捕获数据库没有覆盖的实体，这部分主要是识别蛋白和化学类的实体另一方面，统计方法是使用CoreNLP的条件随机场序列分类器，在BioCreative语料库上进行训练，主要为了识别基因和基因产物的实体。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">在BioNLPProcessor中，一共override了三个方法，resolveCoreference主要和共指关系有关，这里主要改进了它在生物领域的pos tagging，postprocessTags则是针对……，我们更加关心的是被override的recognizeNamedEntities，他们来自于父类ShallowNLPProcessor。改写之后，recognizeNamedEntities比原来简化了很多，先通过recognizeNamedEntities对doc进行处理，然后通过for循环遍历每一句sentence，对其调用nerPostProcessor的process。</div>

            </div>
           </div>

            <div class="p-lower-kv">
                <div class="p-lower-kv__text">
                    <div class="p-lower-kv__subtitle"> </div>


                <div class="p-service-index-map c-fade-in-up js-scroll-item is-shown">
                    <div class="p-service-index-map__image">
                        <picture>
                            <source media="(max-width: 568px)" srcset="image/1.jpg"><img src="image/1.jpg" alt="ポジショニングマップ">
                        </picture>
                    </div>
                </div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">在类HybridNER中，有两个参数，判断是否使用CRFNER和RuleNER，在BioNERProcessor中传入的参数是两者都是用，然后，方法recognizeNamedEntities首先调用方法recognitionNamedEntities，该方法首先调用了RuleNER方法，对传入的doc的每一个sentence，通过ruleNer的find方法寻找sentence中的实体，找到之后传入到sentence.entities，这是通过ruleNER方法分析句子中的实体的过程。如前文的提及，该方法主要用于捕获蛋白和化学物类的实体。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">然后，方法recognitionNamedEntities开始调用CRFNER，最后再合并两者的分析结果，这里不再详述，而继续把重点放在ruleNER。</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">在调用ruleNER的过程中，主要遍历每一个sentence并使用ruleNer的fing方法，ruleNer是一个变量：" ruleNer = KBLoader.loadAll(fromSerializedModel = false) "，</div>

                </div>
            </div>

            <div class="p-lower-kv">
                <div class="p-lower-kv__text">
                    <div class="p-lower-kv__subtitle"> </div>

                <div class="p-service-index-map c-fade-in-up js-scroll-item is-shown">
                    <div class="p-service-index-map__image">
                        <picture>
                            <source media="(max-width: 568px)" srcset="image/2.png"><img src="image/2.png" alt="ポジショニングマップ">
                        </picture>
                    </div>
                </div>
                </div>
            </div>

        <div class="p-lower-kv">
            <div class="p-lower-kv__text">
                <div class="p-lower-kv__subtitle"> </div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2">逐句对RuleNER的调用进行分析，首先是KBLoader的loadAll是一个方法，它具有一个参数fromSerializedModel，返回结果的类型是LexiconNER</div>
                <div class="p-lower-kv__outline p-lower-kv__outline--col2"><br></div>





            </div>
        </div>
		  
		  
		  
		  
		  
		  
		  
		  
		  
		  
		  
		  
		  
		  
		  
		  
        </div>

        <!-- End to define the main content.-->
      </div>

        <footer class="st-ftr" style="color: #535353; background-color: #ececec">



            <div class="m-row">


                <div class="ftr__txt">


                    <section class="info" style="color: #535353">

                        <h1 class="name"><span class="ja">Contact me</span></h1>
                        <h2 class="name"><span class="ja">E-mail</span><span class="en">jesseyulejunjie@outlook.com</span></h2>
                        <h2 class="name"><span class="ja">Facebook</span><span class="en">JesseYule</span></h2>
                        <h2 class="name"><span class="ja">Address</span><span class="en">Guangzhou, China</span></h2>


                    </section>
                </div>
            </div>
            <p class="copyright" style="color: #535353">
                <small style="color: #535353">Copyright ©Jesse Yule. All rights reserved.</small>
            </p>
        </footer>

    </div>
    <script src="../../css/main/main.min.js" async=""></script>

    <script type="text/javascript" defer=""
            src="../../css/menu/autoptimize_73b1aaeb49de3f7372d04614ffa9ecd3.js"></script>

</body></html>